\begin{problem}
  The affine transform in heterogeneous coordinates
  is given by
  \begin{align}
    \begin{bmatrix}
      a & b & c \\
      d & e & f \\
      0 & 0 & 1
    \end{bmatrix}~\label{eq:3.1}.
  \end{align}
  Affine transformations are combinations of:
  \begin{enumroman}
    \item Arbitrary linear transformations with $4$ degrees
      of freedom $(a, b, d, e)$.
    \item Translations with $2$ degrees of freedom $(c, f)$.
  \end{enumroman}
  
  \step
  Does affine transformation apply translation first followed by
  arbitrary linear transformation, or the other way around?
  Prove your answer mathematically.

  \step
  \emph{Hint: check if}\\
  $
    \begin{bmatrix}
      a & b & c \\
      d & e & f \\
      0 & 0 & 1
    \end{bmatrix}
    = 
    \begin{bmatrix}
      1 & 0 & c \\
      0 & 1 & f \\
      0 & 0 & 1
    \end{bmatrix}
    \begin{bmatrix}
      a & b & 0 \\
      d & e & 0 \\
      0 & 0 & 1
    \end{bmatrix}
    \quad \text{ or } \quad 
    \begin{bmatrix}
      a & b & c \\
      d & e & f \\
      0 & 0 & 1
    \end{bmatrix}
    =
    \begin{bmatrix}
      a & b & 0 \\
      d & e & 0 \\
      0 & 0 & 1
    \end{bmatrix}
    \begin{bmatrix}
      1 & 0 & c \\
      0 & 1 & f \\
      0 & 0 & 1
    \end{bmatrix}
  $
\end{problem}

\begin{Answer}
  By computing the matrix products, we see that:
  \begin{align}
    \begin{bmatrix}
      1 & 0 & c \\
      0 & 1 & f \\
      0 & 0 & 1
    \end{bmatrix}
    \begin{bmatrix}
      a & b & 0 \\
      d & e & 0 \\
      0 & 0 & 1
    \end{bmatrix}
    &= 
    \begin{bmatrix}
      a & b & c \\
      d & e & f \\
      0 & 0 & 1
    \end{bmatrix}~\label{eq:3.2} \\
    \nonumber \\
    \begin{bmatrix}
      a & b & 0 \\
      d & e & 0 \\
      0 & 0 & 1
    \end{bmatrix}
    \begin{bmatrix}
      1 & 0 & c \\
      0 & 1 & f \\
      0 & 0 & 1
    \end{bmatrix}
    &=
    \begin{bmatrix}
      a & b & ac + bf \\
      d & e & dc + ef \\
      0 & 0 & 1
    \end{bmatrix}
  \end{align}

  Our desired affine transformation matrix (~\ref{eq:3.1}) matches the first
  matrix product (~\ref{eq:3.2}).
  Since matrices multiply from right to left
  (i.e. $\bA \bB \bc = \bA (\bB \bc)$),
  the linear transformations (rotation, shear, scaling, etc.)
  are applied first before the translation.

  Intuitively, this makes sense because translating first would
  result in the image points being at the wrong coordinates
  during transformation.
\end{Answer}
